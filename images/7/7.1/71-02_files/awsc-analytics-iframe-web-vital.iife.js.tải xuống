var AWSCPanorama=function(D){"use strict";const b=e=>{window.parent.postMessage({event_id:"iFrame_Panorama_Error",error:e},"*")},U=()=>performance.timeOrigin?Math.round(performance.timeOrigin):performance.timing.navigationStart,j=new Set;let h,z="";const G=["keydown","click","pagehide"],me=["tableRendered","tableUpdated"],le=["primaryButtonRendered","primaryButtonUpdated"],ve=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},pe=()=>{try{return window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation").length&&window.performance.getEntriesByType("navigation")[0].activationStart||0}catch(e){return b(e),0}},J=(e,t)=>{const{startTime:i,name:n,detail:r={}}=e;return{name:t,startTime:i,componentEventName:n,componentIdentifier:r.text||r.header||"",componentStartTime:i}},x=()=>{try{if(window&&window.performance&&typeof window.performance.getEntriesByType=="function"){const e=window.performance.getEntriesByType("mark"),t=e.length,i=pe();let n=null,r=null;const a=[];for(let o=t-1;o>=0;o--){const{name:c,detail:s={}}=e[o];if((s==null?void 0:s.source)==="awsui"&&(s!=null&&s.instanceId)&&!(s!=null&&s.loading)&&!j.has(s.instanceId)&&(j.add(s.instanceId),me.includes(c)&&!r?r=e[o]:le.includes(c)&&!n&&(n=e[o]),r&&n))break}r&&a.push(J(r,"tableReadiness")),n&&a.push(J(n,"buttonReadiness")),a.length&&window.parent.postMessage({event_id:"iFrame_Panorama_ConsoleLatency",metricList:a,frameMetaData:{id:z,name:h==null?void 0:h.name,src:h==null?void 0:h.src,navigationStart:U(),activationTime:i}},"*")}}catch(e){b(e)}finally{ge()}},K=()=>{document.visibilityState==="hidden"&&x()},Q=function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)?(G.forEach(t=>{addEventListener(t,x,!0)}),document.addEventListener("visibilitychange",K)):(G.forEach(t=>{removeEventListener(t,x,!0)}),document.removeEventListener("visibilitychange",K))},X=()=>{Q(!0)},ge=()=>{Q(!1)};function he(){let{frame:e=window.frameElement,frameId:t=e.id}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};h=e,z=t,ve(()=>{X()}),addEventListener("message",i=>{const{data:n}=i;(n==null?void 0:n.eventId)==="framePanoramaMessage"&&(n==null?void 0:n.eventName)==="pageTransition"&&X()})}var g,L,Y,I,N,T=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},M=function(e){if(document.readyState==="loading")return"loading";var t=T();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},ye=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},A=function(e,t){var i="";try{for(;e&&e.nodeType!==9;){var n=e,r=n.id?"#"+n.id:ye(n)+(n.className&&n.className.length?"."+n.className.replace(/\s+/g,"."):"");if(i.length+r.length>(t||100)-1)return i||r;if(i=i?r+">"+i:r,n.id)break;e=n.parentNode}}catch{}return i},Z=-1,$=function(){return Z},y=function(e){addEventListener("pageshow",function(t){t.persisted&&(Z=t.timeStamp,e(t))},!0)},k=function(){var e=T();return e&&e.activationStart||0},m=function(e,t){var i=T(),n="navigate";return $()>=0?n="back-forward-cache":i&&(n=document.prerendering||k()>0?"prerender":document.wasDiscarded?"restore":i.type.replace(/_/g,"-")),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},E=function(e,t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return n.observe(Object.assign({type:e,buffered:!0},i||{})),n}}catch{}},l=function(e,t,i,n){var r,a;return function(o){t.value>=0&&(o||n)&&((a=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=a,t.rating=function(c,s){return c>s[1]?"poor":c>s[0]?"needs-improvement":"good"}(t.value,i),e(t))}},_=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},B=function(e){var t=function(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||e(i)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},O=function(e){var t=!1;return function(i){t||(e(i),t=!0)}},w=-1,ee=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},P=function(e){document.visibilityState==="hidden"&&w>-1&&(w=e.type==="visibilitychange"?e.timeStamp:0,Te())},ne=function(){addEventListener("visibilitychange",P,!0),addEventListener("prerenderingchange",P,!0)},Te=function(){removeEventListener("visibilitychange",P,!0),removeEventListener("prerenderingchange",P,!0)},q=function(){return w<0&&(w=ee(),ne(),y(function(){setTimeout(function(){w=ee(),ne()},0)})),{get firstHiddenTime(){return w}}},C=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},te=function(e,t){t=t||{},C(function(){var i,n=[1800,3e3],r=q(),a=m("FCP"),o=E("paint",function(c){c.forEach(function(s){s.name==="first-contentful-paint"&&(o.disconnect(),s.startTime<r.firstHiddenTime&&(a.value=Math.max(s.startTime-k(),0),a.entries.push(s),i(!0)))})});o&&(i=l(e,a,n,t.reportAllChanges),y(function(c){a=m("FCP"),i=l(e,a,n,t.reportAllChanges),_(function(){a.value=performance.now()-c.timeStamp,i(!0)})}))})},Ee=function(e,t){(function(i,n){n=n||{},te(O(function(){var r,a=[.1,.25],o=m("CLS",0),c=0,s=[],u=function(v){v.forEach(function(d){if(!d.hadRecentInput){var S=s[0],xe=s[s.length-1];c&&d.startTime-xe.startTime<1e3&&d.startTime-S.startTime<5e3?(c+=d.value,s.push(d)):(c=d.value,s=[d])}}),c>o.value&&(o.value=c,o.entries=s,r())},f=E("layout-shift",u);f&&(r=l(i,o,a,n.reportAllChanges),B(function(){u(f.takeRecords()),r(!0)}),y(function(){c=0,o=m("CLS",0),r=l(i,o,a,n.reportAllChanges),_(function(){return r()})}),setTimeout(r,0))}))})(function(i){(function(n){if(n.entries.length){var r=n.entries.reduce(function(c,s){return c&&c.value>s.value?c:s});if(r&&r.sources&&r.sources.length){var a=(o=r.sources).find(function(c){return c.node&&c.node.nodeType===1})||o[0];if(a)return void(n.attribution={largestShiftTarget:A(a.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:a,largestShiftEntry:r,loadState:M(r.startTime)})}}var o;n.attribution={}})(i),e(i)},t)},we=function(e,t){te(function(i){(function(n){if(n.entries.length){var r=T(),a=n.entries[n.entries.length-1];if(r){var o=r.activationStart||0,c=Math.max(0,r.responseStart-o);return void(n.attribution={timeToFirstByte:c,firstByteToFCP:n.value-c,loadState:M(n.entries[0].startTime),navigationEntry:r,fcpEntry:a})}}n.attribution={timeToFirstByte:0,firstByteToFCP:n.value,loadState:M($())}})(i),e(i)},t)},F={passive:!0,capture:!0},Se=new Date,re=function(e,t){g||(g=t,L=e,Y=new Date,ae(removeEventListener),ie())},ie=function(){if(L>=0&&L<Y-Se){var e={entryType:"first-input",name:g.type,target:g.target,cancelable:g.cancelable,startTime:g.timeStamp,processingStart:g.timeStamp+L};I.forEach(function(t){t(e)}),I=[]}},be=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(i,n){var r=function(){re(i,n),o()},a=function(){o()},o=function(){removeEventListener("pointerup",r,F),removeEventListener("pointercancel",a,F)};addEventListener("pointerup",r,F),addEventListener("pointercancel",a,F)}(t,e):re(t,e)}},ae=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,be,F)})},Le=function(e,t){t=t||{},C(function(){var i,n=[100,300],r=q(),a=m("FID"),o=function(u){u.startTime<r.firstHiddenTime&&(a.value=u.processingStart-u.startTime,a.entries.push(u),i(!0))},c=function(u){u.forEach(o)},s=E("first-input",c);i=l(e,a,n,t.reportAllChanges),s&&B(O(function(){c(s.takeRecords()),s.disconnect()})),s&&y(function(){var u;a=m("FID"),i=l(e,a,n,t.reportAllChanges),I=[],L=-1,g=null,ae(addEventListener),u=o,I.push(u),ie()})})},Me=function(e,t){Le(function(i){(function(n){var r=n.entries[0];n.attribution={eventTarget:A(r.target),eventType:r.name,eventTime:r.startTime,eventEntry:r,loadState:M(r.startTime)}})(i),e(i)},t)},oe=0,H=1/0,R=0,Ce=function(e){e.forEach(function(t){t.interactionId&&(H=Math.min(H,t.interactionId),R=Math.max(R,t.interactionId),oe=R?(R-H)/7+1:0)})},ce=function(){return N?oe:performance.interactionCount||0},Fe=function(){"interactionCount"in performance||N||(N=E("event",Ce,{type:"event",buffered:!0,durationThreshold:0}))},se=0,ue=function(){return ce()-se},p=[],V={},de=function(e){var t=p[p.length-1],i=V[e.interactionId];if(i||p.length<10||e.duration>t.latency){if(i)i.entries.push(e),i.latency=Math.max(i.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};V[n.id]=n,p.push(n)}p.sort(function(r,a){return a.latency-r.latency}),p.splice(10).forEach(function(r){delete V[r.id]})}},Ie=function(e,t){t=t||{},C(function(){var i=[200,500];Fe();var n,r=m("INP"),a=function(c){c.forEach(function(f){f.interactionId&&de(f),f.entryType==="first-input"&&!p.some(function(v){return v.entries.some(function(d){return f.duration===d.duration&&f.startTime===d.startTime})})&&de(f)});var s,u=(s=Math.min(p.length-1,Math.floor(ue()/50)),p[s]);u&&u.latency!==r.value&&(r.value=u.latency,r.entries=u.entries,n())},o=E("event",a,{durationThreshold:t.durationThreshold||40});n=l(e,r,i,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),B(function(){a(o.takeRecords()),r.value<0&&ue()>0&&(r.value=0,r.entries=[]),n(!0)}),y(function(){p=[],se=ce(),r=m("INP"),n=l(e,r,i,t.reportAllChanges)}))})},Ae=function(e,t){Ie(function(i){(function(n){if(n.entries.length){var r=n.entries.sort(function(a,o){return o.duration-a.duration||o.processingEnd-o.processingStart-(a.processingEnd-a.processingStart)})[0];n.attribution={eventTarget:A(r.target),eventType:r.name,eventTime:r.startTime,eventEntry:r,loadState:M(r.startTime)}}else n.attribution={}})(i),e(i)},t)},W={},ke=function(e,t){(function(i,n){n=n||{},C(function(){var r,a=[2500,4e3],o=q(),c=m("LCP"),s=function(v){var d=v[v.length-1];if(d){var S=Math.max(d.startTime-k(),0);S<o.firstHiddenTime&&(c.value=S,c.entries=[d],r())}},u=E("largest-contentful-paint",s);if(u){r=l(i,c,a,n.reportAllChanges);var f=O(function(){W[c.id]||(s(u.takeRecords()),u.disconnect(),W[c.id]=!0,r(!0))});["keydown","click"].forEach(function(v){addEventListener(v,f,!0)}),B(f),y(function(v){c=m("LCP"),r=l(i,c,a,n.reportAllChanges),_(function(){c.value=performance.now()-v.timeStamp,W[c.id]=!0,r(!0)})})}})})(function(i){(function(n){if(n.entries.length){var r=T();if(r){var a=r.activationStart||0,o=n.entries[n.entries.length-1],c=o.url&&performance.getEntriesByType("resource").filter(function(S){return S.name===o.url})[0],s=Math.max(0,r.responseStart-a),u=Math.max(s,c?(c.requestStart||c.startTime)-a:0),f=Math.max(u,c?c.responseEnd-a:0),v=Math.max(f,o?o.startTime-a:0),d={element:A(o.element),timeToFirstByte:s,resourceLoadDelay:u-s,resourceLoadTime:f-u,elementRenderDelay:v-f,navigationEntry:r,lcpEntry:o};return o.url&&(d.url=o.url),c&&(d.lcpResourceEntry=c),void(n.attribution=d)}}n.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:n.value}})(i),e(i)},t)},Be=function e(t){document.prerendering?C(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},Pe=function(e,t){t=t||{};var i=[800,1800],n=m("TTFB"),r=l(e,n,i,t.reportAllChanges);Be(function(){var a=T();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;n.value=Math.max(o-k(),0),n.entries=[a],r(!0),y(function(){n=m("TTFB",0),(r=l(e,n,i,t.reportAllChanges))(!0)})}})},Re=function(e,t){Pe(function(i){(function(n){if(n.entries.length){var r=n.entries[0],a=r.activationStart||0,o=Math.max(r.domainLookupStart-a,0),c=Math.max(r.connectStart-a,0),s=Math.max(r.requestStart-a,0);n.attribution={waitingTime:o,dnsTime:c-o,connectionTime:s-c,requestTime:n.value-s,navigationEntry:r}}else n.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}})(i),e(i)},t)};function De(){let{frame:e=window.frameElement,frameId:t=e.id}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ee(i,{reportAllChanges:!0}),Me(i),ke(i),we(i),Re(i),Ae(i);function i(n){var o;const{name:r,delta:a}=n;try{window.parent.postMessage({event_id:"iFrame_Panorama_WebVital",metric:{name:r,delta:a,element:n.name==="LCP"?(o=n.attribution)==null?void 0:o.element:void 0},frameMetaData:{id:t,name:e==null?void 0:e.name,src:e==null?void 0:e.src,navigationStart:U()}},"*")}catch(c){b(c)}}}function fe(){var i;let{frame:e=window.frameElement,frameId:t=e.id}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!((i=window.parent)!=null&&i.postMessage)){console.error("window.parent or window.parent.postMessage is falsy, latency metrics won't be sent");return}try{De({frame:e,frameId:t})}catch(n){b(n)}try{he({frame:e,frameId:t})}catch(n){b(n)}}return fe(),D.initFrameLatencyMetrics=fe,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),D}({});
